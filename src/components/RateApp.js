import React, {useState} from 'react';
import {
  Text,
  View,
  TouchableOpacity,
  Image,
  Platform,
  Linking,
} from 'react-native';
import Svg, {Path, G, Defs, ClipPath, Rect} from 'react-native-svg';

function RateApp({closeModal, showDontShowAgainButton}) {
  const [goodRate, setGoodRate] = useState(null);
  if (goodRate == null) {
    return (
      <View style={{flex: 1, justifyContent: 'space-between'}}>
        <View style={{width: '100%', alignItems: 'center'}}>
          <View
            style={{
              width: '100%',
              flexDirection: 'row',
              justifyContent: 'flex-end',
              paddingVertical: 12,
              paddingHorizontal: 24,
            }}>
            <TouchableOpacity
              onPress={closeModal}
              style={{
                backgroundColor: '#22252E',
                borderRadius: 10,
                padding: 6,
              }}>
              <Svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <Path
                  d="M11.1746 9.9982L16.4246 4.75653C16.5815 4.59961 16.6697 4.38679 16.6697 4.16487C16.6697 3.94295 16.5815 3.73012 16.4246 3.5732C16.2677 3.41628 16.0549 3.32812 15.833 3.32812C15.611 3.32812 15.3982 3.41628 15.2413 3.5732L9.99962 8.8232L4.75796 3.5732C4.60104 3.41628 4.38821 3.32813 4.16629 3.32813C3.94437 3.32813 3.73154 3.41628 3.57462 3.5732C3.4177 3.73012 3.32955 3.94295 3.32955 4.16487C3.32955 4.38679 3.4177 4.59961 3.57462 4.75653L8.82462 9.9982L3.57462 15.2399C3.49652 15.3173 3.43452 15.4095 3.39221 15.5111C3.34991 15.6126 3.32812 15.7215 3.32812 15.8315C3.32812 15.9415 3.34991 16.0505 3.39221 16.152C3.43452 16.2536 3.49652 16.3457 3.57462 16.4232C3.65209 16.5013 3.74426 16.5633 3.84581 16.6056C3.94736 16.6479 4.05628 16.6697 4.16629 16.6697C4.2763 16.6697 4.38522 16.6479 4.48677 16.6056C4.58832 16.5633 4.68049 16.5013 4.75796 16.4232L9.99962 11.1732L15.2413 16.4232C15.3188 16.5013 15.4109 16.5633 15.5125 16.6056C15.614 16.6479 15.7229 16.6697 15.833 16.6697C15.943 16.6697 16.0519 16.6479 16.1534 16.6056C16.255 16.5633 16.3472 16.5013 16.4246 16.4232C16.5027 16.3457 16.5647 16.2536 16.607 16.152C16.6493 16.0505 16.6711 15.9415 16.6711 15.8315C16.6711 15.7215 16.6493 15.6126 16.607 15.5111C16.5647 15.4095 16.5027 15.3173 16.4246 15.2399L11.1746 9.9982Z"
                  fill="white"
                />
              </Svg>
            </TouchableOpacity>
          </View>
          <Image
            style={{width: 120, height: 120}}
            source={require('../stars.png')}
          />
          <Text
            style={{
              fontSize: 24,
              fontFamily: 'Inter-Bold',
              color: 'white',
              lineHeight: 32,
            }}>
            Оцените приложение
          </Text>
          <Text
            style={{
              textAlign: 'center',
              fontSize: 16,
              lineHeight: 20,
              fontFamily: 'Inter-Regular',
              color: 'rgba(255, 255, 255, 0.50)',
              width: '90%',
              marginTop: 9,
            }}>
            Будем рады, если вы оставите оценку или отзыв. Вам нравится
            приложение?
          </Text>
          <View style={{gap: 32, flexDirection: 'row', marginTop: 30}}>
            <TouchableOpacity
              onPress={() => setGoodRate(false)}
              style={{
                width: 56,
                height: 56,
                borderRadius: 28,
                backgroundColor: '#303541',
                justifyContent: 'center',
                alignItems: 'center',
              }}>
              <Svg
                xmlns="http://www.w3.org/2000/svg"
                width="28"
                height="28"
                viewBox="0 0 28 28"
                fill="none">
                <G clip-path="url(#clip0_1788_25595)">
                  <Path
                    d="M2.04167 1.16406H4.95833C6.08417 1.16406 7 2.0799 7 3.20573V16.6224C7 17.7482 6.08417 18.6641 4.95833 18.6641H2.04167C0.915833 18.6641 0 17.7482 0 16.6224V3.20573C0 2.0799 0.915833 1.16406 2.04167 1.16406Z"
                    fill="rgba(255, 255, 255, 0.50)"
                  />
                  <Path
                    d="M14.9112 27.125C13.7445 27.125 13.1612 26.5417 13.1612 23.625C13.1612 20.853 10.4767 18.6223 8.75 17.4732V3.0205C10.6178 2.156 14.357 0.875 20.1612 0.875H22.0278C24.3028 0.875 26.2395 2.50833 26.6245 4.74833L27.9312 12.3317C28.4212 15.19 26.2278 17.7917 23.3345 17.7917H17.8278C17.8278 17.7917 18.7028 19.5417 18.7028 22.4583C18.7028 25.9583 16.0778 27.125 14.9112 27.125Z"
                    fill="rgba(255, 255, 255, 0.50)"
                  />
                </G>
                <Defs>
                  <ClipPath id="clip0_1788_25595">
                    <Rect
                      width="28"
                      height="28"
                      fill="white"
                      transform="matrix(1 0 0 -1 0 28)"
                    />
                  </ClipPath>
                </Defs>
              </Svg>
            </TouchableOpacity>
            <TouchableOpacity
              onPress={() => setGoodRate(true)}
              style={{
                width: 56,
                height: 56,
                borderRadius: 28,
                backgroundColor: '#108C15',
                justifyContent: 'center',
                alignItems: 'center',
              }}>
              <Svg
                xmlns="http://www.w3.org/2000/svg"
                width="28"
                height="28"
                viewBox="0 0 28 28"
                fill="none">
                <G clip-path="url(#clip0_1788_25599)">
                  <Path
                    d="M2.04167 26.8359H4.95833C6.08417 26.8359 7 25.9201 7 24.7943V11.3776C7 10.2518 6.08417 9.33594 4.95833 9.33594H2.04167C0.915833 9.33594 0 10.2518 0 11.3776V24.7943C0 25.9201 0.915833 26.8359 2.04167 26.8359Z"
                    fill="white"
                  />
                  <Path
                    d="M14.9112 0.875C13.7445 0.875 13.1612 1.45833 13.1612 4.375C13.1612 7.147 10.4767 9.37767 8.75 10.5268V24.9795C10.6178 25.844 14.357 27.125 20.1612 27.125H22.0278C24.3028 27.125 26.2395 25.4917 26.6245 23.2517L27.9312 15.6683C28.4212 12.81 26.2278 10.2083 23.3345 10.2083H17.8278C17.8278 10.2083 18.7028 8.45833 18.7028 5.54167C18.7028 2.04167 16.0778 0.875 14.9112 0.875Z"
                    fill="white"
                  />
                </G>
                <Defs>
                  <ClipPath id="clip0_1788_25599">
                    <Rect width="28" height="28" fill="white" />
                  </ClipPath>
                </Defs>
              </Svg>
            </TouchableOpacity>
          </View>
        </View>
        {showDontShowAgainButton && (
          <TouchableOpacity
            onPress={() => closeModal()}
            style={{
              bottom: 40,
              paddingVertical: 10,
              paddingHorizontal: 32,
              borderRadius: 12,
              alignSelf: 'center',
              borderWidth: 1,
              borderColor: '#272D35',
            }}>
            <Text
              style={{
                fontSize: 16,
                lineHeight: 20,
                fontFamily: 'Inter-Regular',
                color: 'rgba(255, 255, 255, 0.50)',
              }}>
              Не показывать больше
            </Text>
          </TouchableOpacity>
        )}
      </View>
    );
  } else if (goodRate == true) {
    return (
      <View style={{flex: 1, alignItems: 'center'}}>
        <View
          style={{
            width: '100%',
            flexDirection: 'row',
            justifyContent: 'flex-end',
            paddingVertical: 12,
            paddingHorizontal: 24,
          }}>
          <TouchableOpacity
            onPress={closeModal}
            style={{backgroundColor: '#22252E', borderRadius: 10, padding: 6}}>
            <Svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <Path
                d="M11.1746 9.9982L16.4246 4.75653C16.5815 4.59961 16.6697 4.38679 16.6697 4.16487C16.6697 3.94295 16.5815 3.73012 16.4246 3.5732C16.2677 3.41628 16.0549 3.32812 15.833 3.32812C15.611 3.32812 15.3982 3.41628 15.2413 3.5732L9.99962 8.8232L4.75796 3.5732C4.60104 3.41628 4.38821 3.32813 4.16629 3.32813C3.94437 3.32813 3.73154 3.41628 3.57462 3.5732C3.4177 3.73012 3.32955 3.94295 3.32955 4.16487C3.32955 4.38679 3.4177 4.59961 3.57462 4.75653L8.82462 9.9982L3.57462 15.2399C3.49652 15.3173 3.43452 15.4095 3.39221 15.5111C3.34991 15.6126 3.32812 15.7215 3.32812 15.8315C3.32812 15.9415 3.34991 16.0505 3.39221 16.152C3.43452 16.2536 3.49652 16.3457 3.57462 16.4232C3.65209 16.5013 3.74426 16.5633 3.84581 16.6056C3.94736 16.6479 4.05628 16.6697 4.16629 16.6697C4.2763 16.6697 4.38522 16.6479 4.48677 16.6056C4.58832 16.5633 4.68049 16.5013 4.75796 16.4232L9.99962 11.1732L15.2413 16.4232C15.3188 16.5013 15.4109 16.5633 15.5125 16.6056C15.614 16.6479 15.7229 16.6697 15.833 16.6697C15.943 16.6697 16.0519 16.6479 16.1534 16.6056C16.255 16.5633 16.3472 16.5013 16.4246 16.4232C16.5027 16.3457 16.5647 16.2536 16.607 16.152C16.6493 16.0505 16.6711 15.9415 16.6711 15.8315C16.6711 15.7215 16.6493 15.6126 16.607 15.5111C16.5647 15.4095 16.5027 15.3173 16.4246 15.2399L11.1746 9.9982Z"
                fill="white"
              />
            </Svg>
          </TouchableOpacity>
        </View>
        <Image
          style={{width: 120, height: 120}}
          source={require('../sun.png')}
        />
        <Text
          style={{
            fontSize: 24,
            fontFamily: 'Inter-Bold',
            color: 'white',
            lineHeight: 32,
            textAlign: 'center',
          }}>
          {'Нам нет и года и ваш отзыв\nправда нам важен!'}
        </Text>
        <Svg
          style={{marginTop: -8, left: 45}}
          width="155"
          height="18"
          viewBox="0 0 155 18"
          fill="none">
          <G clip-path="url(#clip0_2041_29)">
            <Path
              d="M154.476 11.2158C154.105 10.6269 153.632 10.2387 153.142 10.0369C153.115 10.0283 153.088 10.0216 153.062 10.0148C153.149 9.98632 153.237 9.9578 153.324 9.92744L153.207 9.96731C153.282 9.94726 153.356 9.92171 153.429 9.89616C153.473 9.88373 153.517 9.86949 153.561 9.85524C153.759 9.79566 153.95 9.69211 154.145 9.61421C153.948 9.13015 153.657 8.76703 153.352 8.49595C152.997 8.21157 152.606 8.11821 152.22 8.1196C151.679 8.09356 151.138 8.06388 150.597 8.02511C149.778 7.98202 149.469 7.87445 148.513 7.90115C146.548 8.00474 144.591 8.31964 142.632 8.54899C141.317 8.71662 140.001 8.86784 138.685 9.01175C137.504 8.94764 136.323 8.87443 135.143 8.7758C132.344 8.53192 129.544 8.26076 126.743 8.13681C121.086 7.86447 115.429 7.59031 109.771 7.3234C105.961 7.15633 102.15 6.95284 98.3409 6.98404C95.25 7.0007 92.1559 6.78992 89.0665 6.91576C82.7213 7.07759 76.3768 7.30311 70.0342 7.56326C67.3869 7.74675 64.7393 7.9084 62.0912 8.05912C59.9577 7.86004 57.8231 7.71727 55.6887 7.64724C52.5585 7.75111 49.4269 7.80219 46.2954 7.84599C41.4946 7.80579 36.6967 7.20569 31.8965 6.99641C29.3352 6.88947 26.7755 6.90625 24.2165 6.98671C22.0125 7.18972 19.8029 7.16153 17.5933 7.1388C14.5174 7.07618 11.4416 7.0172 8.36613 6.98188C7.61232 6.97286 6.85938 6.99844 6.10552 7.00397C5.57573 7.02756 5.04323 6.97828 4.51619 7.06019C3.94405 7.19266 3.38716 7.4786 2.86783 7.89182C2.87522 7.89581 2.88212 7.89978 2.88951 7.90377C2.6457 7.88658 2.40137 7.87482 2.15797 7.88128C1.55737 7.96329 0.966941 8.24034 0.439488 8.71681C0.947962 9.27588 1.52423 9.64911 2.11748 9.83041C2.87673 9.97424 3.64245 9.96565 4.40389 10.0496C6.07959 10.1393 7.75574 10.24 9.43147 10.3225C13.1603 10.4275 16.8891 10.5488 20.6182 10.7102C23.642 10.8303 26.667 11.0268 29.6895 10.9796C32.7744 10.979 35.8516 10.6817 38.9295 10.4444C40.7998 10.3671 42.6696 10.2862 44.542 10.3236C47.5333 10.4203 50.5258 10.5971 53.5161 10.5502C57.3304 10.3647 61.1433 10.1464 64.9563 9.91175C65.1774 9.93876 65.3994 9.96763 65.6249 9.99667C67.1439 10.2862 68.6597 10.6374 70.1824 10.858C70.8672 10.9709 71.5525 11.0857 72.2373 11.1987C73.0176 11.2599 73.7985 11.2993 74.5793 11.3515C79.8711 11.719 85.1623 11.3209 90.4545 11.7121C93.2122 11.8467 95.9669 12.252 98.7242 12.3557C104.152 12.5006 109.571 12.1742 114.993 12.0079C120.065 11.9138 125.139 11.9127 130.207 11.6693C132.593 11.5405 134.974 11.3061 137.354 11.0461C137.569 11.0291 137.782 11.0085 137.997 10.9897C138.914 11.0484 139.831 11.0998 140.748 11.1367C144.206 11.325 147.902 11.432 150.911 11.7642C151.372 11.8118 151.833 11.8522 152.293 11.9125C152.77 11.9937 153.253 12.0169 153.717 11.8083C153.923 11.7256 154.125 11.6062 154.316 11.4535C154.385 11.4005 154.453 11.3437 154.519 11.2833C154.506 11.2608 154.492 11.2383 154.479 11.2159L154.476 11.2158ZM21.5597 8.73169C20.9205 8.70274 20.2813 8.67742 19.6421 8.65028C20.3456 8.65506 21.049 8.65983 21.7525 8.65915C22.9692 8.58317 24.185 8.47441 25.4039 8.46945C28.6951 8.35333 31.9895 8.47738 35.2825 8.69592C34.0243 8.78809 32.7661 8.8748 31.507 8.93238C28.1927 9.02374 24.8761 8.89863 21.5597 8.73169ZM114.965 10.2355C109.465 10.4362 103.969 10.7953 98.4626 10.6793C95.9126 10.5784 93.365 10.2357 90.8151 10.1111C85.2011 9.68447 79.5899 10.1435 73.9763 9.73503C73.1969 9.70115 72.4049 9.62301 71.6011 9.51522C75.9134 9.35007 80.2261 9.20857 84.5389 9.06344C86.7059 8.98048 88.8737 8.94483 91.0412 8.88553C93.1475 8.91784 95.2539 8.95924 97.3602 9.00609C103.96 8.94926 110.564 9.40535 117.165 9.69225C119.578 9.81931 121.99 9.9191 124.403 10.0352C121.257 10.1202 118.111 10.1578 114.966 10.2373L114.965 10.2355Z"
              fill="#F1CC06"
            />
          </G>
          <Defs>
            <ClipPath id="clip0_2041_29">
              <Rect
                width="154.239"
                height="9.14291"
                fill="white"
                transform="matrix(0.998843 0.0480869 -0.00354859 0.999994 0.467041 0.746094)"
              />
            </ClipPath>
          </Defs>
        </Svg>
        <Text
          style={{
            textAlign: 'center',
            fontSize: 16,
            lineHeight: 20,
            fontFamily: 'Inter-Regular',
            color: 'rgba(255, 255, 255, 0.50)',
            width: '90%',
            marginTop: 6,
          }}>
          Мы будем очень признательны, если вы поделитесь отзывом с другими
          людьми.
        </Text>
        <TouchableOpacity
          onPress={() =>
            Linking.openURL(
              Platform.OS == 'ios'
                ? 'https://apps.apple.com/us/app/mirolang/id6473404615'
                : 'https://play.google.com/store/apps/details?id=ru.mirolang&pli=1',
            )
          }
          style={{
            paddingVertical: 14,
            width: '90%',
            backgroundColor: '#F1CC06',
            borderRadius: 12,
            marginTop: 24,
          }}>
          <Text
            style={{
              fontFamily: 'Inter-SemiBold',
              fontSize: 16,
              lineHeight: 20,
              color: '#14161B',
              width: '100%',
              textAlign: 'center',
            }}>
            {Platform.OS == 'ios'
              ? 'Перейти в App Store'
              : 'Перейти в Google Play'}
          </Text>
        </TouchableOpacity>
      </View>
    );
  } else if (goodRate == false) {
    return (
      <View style={{flex: 1, alignItems: 'center'}}>
        <View
          style={{
            width: '100%',
            flexDirection: 'row',
            justifyContent: 'flex-end',
            paddingVertical: 12,
            paddingHorizontal: 24,
          }}>
          <TouchableOpacity
            onPress={closeModal}
            style={{backgroundColor: '#22252E', borderRadius: 10, padding: 6}}>
            <Svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <Path
                d="M11.1746 9.9982L16.4246 4.75653C16.5815 4.59961 16.6697 4.38679 16.6697 4.16487C16.6697 3.94295 16.5815 3.73012 16.4246 3.5732C16.2677 3.41628 16.0549 3.32812 15.833 3.32812C15.611 3.32812 15.3982 3.41628 15.2413 3.5732L9.99962 8.8232L4.75796 3.5732C4.60104 3.41628 4.38821 3.32813 4.16629 3.32813C3.94437 3.32813 3.73154 3.41628 3.57462 3.5732C3.4177 3.73012 3.32955 3.94295 3.32955 4.16487C3.32955 4.38679 3.4177 4.59961 3.57462 4.75653L8.82462 9.9982L3.57462 15.2399C3.49652 15.3173 3.43452 15.4095 3.39221 15.5111C3.34991 15.6126 3.32812 15.7215 3.32812 15.8315C3.32812 15.9415 3.34991 16.0505 3.39221 16.152C3.43452 16.2536 3.49652 16.3457 3.57462 16.4232C3.65209 16.5013 3.74426 16.5633 3.84581 16.6056C3.94736 16.6479 4.05628 16.6697 4.16629 16.6697C4.2763 16.6697 4.38522 16.6479 4.48677 16.6056C4.58832 16.5633 4.68049 16.5013 4.75796 16.4232L9.99962 11.1732L15.2413 16.4232C15.3188 16.5013 15.4109 16.5633 15.5125 16.6056C15.614 16.6479 15.7229 16.6697 15.833 16.6697C15.943 16.6697 16.0519 16.6479 16.1534 16.6056C16.255 16.5633 16.3472 16.5013 16.4246 16.4232C16.5027 16.3457 16.5647 16.2536 16.607 16.152C16.6493 16.0505 16.6711 15.9415 16.6711 15.8315C16.6711 15.7215 16.6493 15.6126 16.607 15.5111C16.5647 15.4095 16.5027 15.3173 16.4246 15.2399L11.1746 9.9982Z"
                fill="white"
              />
            </Svg>
          </TouchableOpacity>
        </View>
        <Image
          style={{width: 120, height: 120}}
          source={require('../cloud.png')}
        />
        <Text
          style={{
            fontSize: 24,
            fontFamily: 'Inter-Bold',
            color: 'white',
            lineHeight: 32,
            textAlign: 'center',
          }}>
          Нам очень жаль!
        </Text>
        <Text
          style={{
            textAlign: 'center',
            fontSize: 16,
            lineHeight: 20,
            fontFamily: 'Inter-Regular',
            color: 'rgba(255, 255, 255, 0.50)',
            width: '100%',
            marginTop: 9,
          }}>
          {
            'Напишите нам на support@mirolang.ru,\nесли вы столкнулись с проблемой.'
          }
        </Text>
        <TouchableOpacity
          onPress={() => closeModal()}
          style={{
            paddingVertical: 10,
            width: '60%',
            backgroundColor: '#1C1F26',
            borderWidth: 1,
            borderColor: '#313843',
            borderRadius: 12,
            marginTop: 24,
          }}>
          <Text
            style={{
              fontFamily: 'Inter-SemiBold',
              fontSize: 16,
              lineHeight: 20,
              color: 'rgba(255, 255, 255, 0.70)',
              width: '100%',
              textAlign: 'center',
            }}>
            Закрыть окно
          </Text>
        </TouchableOpacity>
      </View>
    );
  }
}

export default RateApp;
